import networkx as nx
import matplotlib.pyplot as plt
from graph import *

N = 20

G_V = [(0.91653633515404, 0.4932070258979898), (0.09295461450752995, 0.9645329007473591), (0.24451556906631566, 0.4652259375620821), (0.7653140324185863, 0.8614988863794735), (0.21015262875012264, 0.3194260792001117), (0.3041107966578056, 0.6145668273177224), (0.9155131280139471, 0.0017873414866036441), (0.7226783188625262, 0.48480637475650645), (0.17294481514792925, 0.8716166594679399), (0.046050167993766156, 0.7527843545367694), (0.08862603126840918, 0.22149027434112), (0.8088277056596853, 0.23493671186998422), (0.8756067658984594, 0.8249958586366513), (0.5405456270721033, 0.676257912593649), (0.85062767402194, 0.6686956966261689), (0.014423211832506277, 0.37452357317554275), (0.9131871622268104, 0.275984174494307), (0.7694810101577504, 0.4157268049852292), (0.612741952156492, 0.2687348493085394), (0.4590692694021392, 0.23671920413326497)]

# G_E = gen_spanning_tree(G_V)

G_E = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1], [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0], [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1], [0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0], [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1], [0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0]]


print G_E

G_E_fail = random_fail(G_E)

# G_E_fail = G_E

Gr = nx.Graph()
for i in range(N):
  Gr.add_node(i, pos=G_V[i])

for i in range(N):
  for j in range(N):
    if G_E_fail[i][j]:
      Gr.add_edge(i,j)

labels = dict()
for i in range(N):
  labels[i] = str(i)

pos=nx.get_node_attributes(Gr,'pos')

nx.draw(Gr, pos=pos, 
    node_size=400, with_labels=False)
nx.draw_networkx_labels(Gr, pos, labels)

plt.savefig("graph_fail.png")

print path_changed(G_E, G_E_fail)

